<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.waibizi.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="MyBatis分页前言最近在开发自己的博客系统，前端采用vue+nuxt，后端采用SpringBoot+MyBatis作为整体架构，所以用到一些实战的技巧就打算顺便写写文章。 1.分页介绍分页是日常开发当中经常会遇到的问题，无论你是浏览百度又或者是谷歌都会有下一页的操作，那么，我们现在项目用的是MyBatis，就简单介绍一下怎么使用MyBatis开发的时候，怎么进行分页操作。 在使用MyBatis">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis分页">
<meta property="og:url" content="https://www.waibizi.com/2021/01/16/MyBatis%E5%88%86%E9%A1%B5/index.html">
<meta property="og:site_name" content="歪鼻子">
<meta property="og:description" content="MyBatis分页前言最近在开发自己的博客系统，前端采用vue+nuxt，后端采用SpringBoot+MyBatis作为整体架构，所以用到一些实战的技巧就打算顺便写写文章。 1.分页介绍分页是日常开发当中经常会遇到的问题，无论你是浏览百度又或者是谷歌都会有下一页的操作，那么，我们现在项目用的是MyBatis，就简单介绍一下怎么使用MyBatis开发的时候，怎么进行分页操作。 在使用MyBatis">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.waibizi.com/group1/M00/00/05/rBpUXl8djm2AKHmOAACYdCdqBx4043.png">
<meta property="article:published_time" content="2021-01-16T13:35:09.779Z">
<meta property="article:modified_time" content="2021-01-16T13:55:47.655Z">
<meta property="article:author" content="歪鼻子">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.waibizi.com/group1/M00/00/05/rBpUXl8djm2AKHmOAACYdCdqBx4043.png">

<link rel="canonical" href="https://www.waibizi.com/2021/01/16/MyBatis%E5%88%86%E9%A1%B5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>MyBatis分页 | 歪鼻子</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="歪鼻子" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">歪鼻子</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.waibizi.com/2021/01/16/MyBatis%E5%88%86%E9%A1%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="歪鼻子">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="歪鼻子">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MyBatis分页
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-16 21:35:09 / Modified: 21:55:47" itemprop="dateCreated datePublished" datetime="2021-01-16T21:35:09+08:00">2021-01-16</time>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="MyBatis分页"><a href="#MyBatis分页" class="headerlink" title="MyBatis分页"></a>MyBatis分页</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在开发自己的博客系统，前端采用vue+nuxt，后端采用SpringBoot+MyBatis作为整体架构，所以用到一些实战的技巧就打算顺便写写文章。</p>
<h2 id="1-分页介绍"><a href="#1-分页介绍" class="headerlink" title="1.分页介绍"></a>1.分页介绍</h2><p><font color=" #FF8C00">分页</font>是日常开发当中经常会遇到的问题，无论你是浏览百度又或者是谷歌都会有下一页的操作，那么，我们现在项目用的是MyBatis，就简单介绍一下怎么使用MyBatis开发的时候，怎么进行分页操作。</p>
<p>在使用MyBatis开发当中，通常会用三种分页方式<font color="#FF33FF">（1）一种是采用原始的SQL进行分页的（2）一种是采用interceptor来进行SQL的拼接，达到分页的效果（3）最后一种是使用PageHelper插件来进行分页。</font></p>
<p>贴心的我，为你们准备了测试的SQL了，数据你们就自己插入了哈</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`article`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`article`</span>  (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'表唯一id'</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'标题'</span>,</span><br><span class="line">  <span class="string">`content`</span> <span class="built_in">text</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">COMMENT</span> <span class="string">'内容'</span>,</span><br><span class="line">  <span class="string">`like`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'点赞'</span>,</span><br><span class="line">  <span class="string">`category_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'分类id'</span>,</span><br><span class="line">  <span class="string">`time`</span> datetime(<span class="number">0</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'时间'</span>,</span><br><span class="line">  <span class="string">`image`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'封面图片地址'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">) <span class="keyword">ENGINE</span> = <span class="keyword">InnoDB</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> = utf8 <span class="keyword">COLLATE</span> = utf8_general_ci ROW_FORMAT = Dynamic;</span><br></pre></td></tr></table></figure>

 <a id="more"></a>

<h2 id="2-LIMIT分页"><a href="#2-LIMIT分页" class="headerlink" title="2.LIMIT分页"></a>2.LIMIT分页</h2><p>LIMIT分页是从SQL语句的原始角度分页查询的，也就是采用SQL语句的LIMIT语法，是一种物理分页的形式。</p>
<p>假设我们当前需要查询的是第一页的数据，而且每页的数据量是5，使用如下的SQL语句可以了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> article <span class="keyword">LIMIT</span> <span class="number">0</span>, <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>查询第二页的数据我们就是采用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> article <span class="keyword">LIMIT</span> <span class="number">5</span>, <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>OK，看着这里，我就顺便重新带你回忆一下LIMIT的语法，LIMIT 后面带着两个数，表示的意思就是从第几行开始查询，然后查询多少条数据。</p>
<p>看到这里，你也明白了分页查询就是需要这两个参数</p>
<p>那么先介绍一下分页当中的两个重要概念：<font color=" #FF8C00">pageSize，pageNum</font>。</p>
<p><font color="#FF33FF">pageSize</font>：表示的是一页查询多少条数据。</p>
<p><font color="#FF33FF">pageNum</font>：表示的是当前在第几页。</p>
<p>那么pageSize与pageNum怎么运用到SQL分页当中呢，我们先来假设一个场景，我们现在访问的是第一页，每页数据是五个，也就是pageNum是1，pageSize是5，对应的SQL语句就是：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span>  article <span class="keyword">LIMIT</span> (pageNum<span class="number">-1</span>)*pageSize,pageSize</span><br></pre></td></tr></table></figure>

<p>但是咧，<font color="#00FA9A">SQL并不支持计算</font>，所以我们需要在传入的时候提前计算，而且有边缘值需要细抠一下，就是当pageNum等于0的时候。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageNum&gt;<span class="number">0</span>? pageNum-<span class="number">1</span>:<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>首先看下返回的数据：</p>
<div align="center"><img src="https://www.waibizi.com/group1/M00/00/05/rBpUXl8djm2AKHmOAACYdCdqBx4043.png"></div>



<p>OK！！！我们知道了返回的数据格式是这个样子，所以我们需要构建一下我们需要返回的data的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pager</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前页</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageNum;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页当中每一页的数量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageSize;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询出来的数据集合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; rows;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据的总条数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> total;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>Mapper层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SummaryMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Summary&gt; <span class="title">summaryPage</span><span class="params">(Map&lt;String, Object&gt; params)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="title">count</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>对应的XML</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.waibizi.blog.project.mapper.SummaryMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"summaryPage"</span> <span class="attr">resultType</span>=<span class="string">"com.waibizi.blog.project.model.pojo.Summary"</span> <span class="attr">parameterType</span>=<span class="string">"java.util.Map"</span>&gt;</span></span><br><span class="line">       SELECT * FROM summary  WHERE category_id = #&#123;categoryId&#125; LIMIT #&#123;pageNum&#125;,#&#123;pageSize&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"count"</span> <span class="attr">resultType</span>=<span class="string">"long"</span>&gt;</span></span><br><span class="line">        SELECT COUNT(1) FROM summary</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>再来一个Service的实现层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SummaryServiceImpl</span> <span class="keyword">implements</span> <span class="title">SummaryService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SummaryMapper summaryMapper;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageNum 当前页数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageSize 页面数量</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryId 分类的ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pager&lt;Summary&gt; <span class="title">summaryPage</span><span class="params">(<span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize, <span class="keyword">int</span> categoryId)</span> </span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; params = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        params.put(<span class="string">"pageNum"</span>,(pageNum-<span class="number">1</span>&gt;<span class="number">0</span>?<span class="number">0</span>:pageNum)*pageSize);</span><br><span class="line">        params.put(<span class="string">"pageSize"</span>,pageSize);</span><br><span class="line">        params.put(<span class="string">"categoryId"</span>,categoryId);</span><br><span class="line">        Pager&lt;Summary&gt; page = <span class="keyword">new</span> Pager&lt;&gt;();</span><br><span class="line">        <span class="keyword">long</span> count = summaryMapper.count();</span><br><span class="line">        List&lt;Summary&gt; list = summaryMapper.summaryPage(params);</span><br><span class="line">        page.setRows(list);</span><br><span class="line">        page.setTotal(count);</span><br><span class="line">        <span class="keyword">return</span> page;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>然后我们简单在Contrller层进行调用就可以了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/article/summary/list/&#123;categoryId&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> BlogResult <span class="title">GetSummaryList</span><span class="params">( @RequestParam <span class="keyword">int</span> pageNum,</span></span></span><br><span class="line"><span class="function"><span class="params">                                  @RequestParam <span class="keyword">int</span> pageSize,</span></span></span><br><span class="line"><span class="function"><span class="params">                                  @PathVariable <span class="keyword">int</span> categoryId)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> BlogResult.success(<span class="string">"查询成功"</span>,summaryService.summaryPage(pageNum,pageSize,categoryId));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>BlogResult是我封装的统一返回结果集，这个不用理会</p>
<p>实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Summary</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 摘要的唯一id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 摘要的内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String summary;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分类的id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> categoryId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 对应文章的id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> articleId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-Interceptor实现分页查询"><a href="#3-Interceptor实现分页查询" class="headerlink" title="3.Interceptor实现分页查询"></a>3.Interceptor实现分页查询</h2><h3 id="3-1-Interceptor介绍"><a href="#3-1-Interceptor介绍" class="headerlink" title="3.1  Interceptor介绍"></a>3.1  Interceptor介绍</h3><p>Interceptor是MyBatis的拦截器，MyBatis设计拦截器的初衷就是为了提供用户在某些时候可以在拦截器当中去实现一些自己业务操作。既然我们说Interceptor是拦截器，那么这个拦截器是拦截什么呢？结合MyBatis的功能，我们其实不难猜测，这个拦截就是拦截SQL相关的，拦截SQL之后，我们可以在不入侵原有的业务代码的逻辑上做一些相关的操作，例如分页操作，数据权限过滤操作，SQL执行时间性能的监控等等等。那么对于拦截这个SQL，必定涉及到SQL执行的相关对象，因为这个拦截器的本质就是拦截了这四大组件的操作，我们简单了解一下关于MyBatis的四大组件。</p>
<h4 id="3-1-1-MyBatis四大对象介绍"><a href="#3-1-1-MyBatis四大对象介绍" class="headerlink" title="3.1.1 MyBatis四大对象介绍"></a>3.1.1 MyBatis四大对象介绍</h4><p>四大对象分别是<font color=" #FF8C00"><strong>Executor、StatementHandler、PameterHandler和ResultSetHandler</strong></font></p>
<p>别慌哦，四大对象其实很简单的，我们就是简单了解一下他们对应的职责：</p>
<p><font color="#FF33FF"><strong>Executor</strong></font>：所有的SQL执行的都是靠这个到数据库当中去执行的，就是SQL的执行器</p>
<p><font color="#FF33FF"><strong>StatementHandler</strong></font>：学习过JDBC，都知道有一个Statement对象，这个就是MyBatis管理创建Statement对象的</p>
<p><font color="#FF33FF"><strong>ParameterHandler</strong></font>：就是处理SQL的参数的，就是SQL语句的参数处理器</p>
<p><font color="#FF33FF"><strong>ResultSetHandler</strong></font>：处理执行完SQL之后，响应的ResultSet</p>
<h3 id="3-2-Interceptor实现数据操作分页"><a href="#3-2-Interceptor实现数据操作分页" class="headerlink" title="3.2 Interceptor实现数据操作分页"></a>3.2 Interceptor实现数据操作分页</h3><p>使用Interceptor进行分页的步骤就是实现Interceptor接口，然后加上<font color=" #FF8C00">@Intercepts注解</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Intercepts</span>(&#123;<span class="meta">@Signature</span>(type=<span class="keyword">null</span>,method=<span class="string">""</span>,args=&#123;<span class="keyword">null</span>&#125;)&#125;)</span><br></pre></td></tr></table></figure>

<p>PS：其中type是要拦截的类，method是拦截的方法，因为存在重载机制，所以要加上参数列表，args。</p>
<p>OK！！！了解了这些之后，我们就可以来实现我们的分页，首先我们进行分页，还是与LIMIT分页的原理是一致的，我们需要在某一些SQL的语句当中加上LIMIT语句，而且必须在交给Statement预编译之前就拼接了，所以我们应该拦截的StatementHandler这个对象，然后拦截其中的prepare方法。</p>
<p>所以我们有了如下的注解：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Intercepts</span>(&#123;<span class="meta">@Signature</span>(type=StatementHandler<span class="class">.<span class="keyword">class</span>,<span class="title">method</span></span>=<span class="string">"prepare"</span>,</span><br><span class="line">                        args=&#123;Connection<span class="class">.<span class="keyword">class</span>,<span class="title">Integer</span>.<span class="title">class</span>&#125;)&#125;)</span></span><br></pre></td></tr></table></figure>

<p>接下来就是实现Interceptor接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Intercepts</span>(&#123;<span class="meta">@Signature</span>(type= StatementHandler<span class="class">.<span class="keyword">class</span>,<span class="title">method</span></span>=<span class="string">"prepare"</span>,args=&#123;Connection<span class="class">.<span class="keyword">class</span>,<span class="title">Integer</span>.<span class="title">class</span>&#125;)&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">BlogPageInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageNum;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageSize;</span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unused"</span>)</span><br><span class="line">    <span class="keyword">private</span> String dbType;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Invocation invocation)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">/* 获取拦截的对象 */</span></span><br><span class="line">        StatementHandler statementHandler = (StatementHandler) invocation.getTarget();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">          通过Mybatis的一个反射对象得到StatementHandler的属性信息，因为StatementHandler当中的属性都是受保护的</span></span><br><span class="line"><span class="comment">          所以我们需要通过MetaObject对StatementHandler进行反射获取到相关的属性信息</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        MetaObject metaObject = SystemMetaObject.forObject(statementHandler);</span><br><span class="line">        <span class="comment">/* SQL语句其实都是保存在MappedStatement当中，我们需要通过StatementHandler去获取到这个SQL语句 */</span></span><br><span class="line">        MappedStatement mappedStatement = (MappedStatement)metaObject.getValue(<span class="string">"delegate.mappedStatement"</span>);</span><br><span class="line">        <span class="comment">/* 获取SQL语句的ID */</span></span><br><span class="line">        String id = mappedStatement.getId();</span><br><span class="line">        <span class="comment">/* 获取匹配到需要分页的ID */</span></span><br><span class="line">        <span class="keyword">if</span> (id.matches(<span class="string">".+Page$"</span>))&#123;</span><br><span class="line">            <span class="comment">/* 获取到参数处理器 */</span></span><br><span class="line">            ParameterHandler parameterHandler = (ParameterHandler)metaObject.getValue(<span class="string">"delegate.parameterHandler"</span>);</span><br><span class="line">            <span class="comment">/* 因为我们传入是传入Map，所以此处应该重新转为Map */</span></span><br><span class="line">            Map&lt;String, Object&gt; params = (Map&lt;String, Object&gt;)parameterHandler.getParameterObject();</span><br><span class="line">            pageNum = (<span class="keyword">int</span>)params.get(<span class="string">"pageNum"</span>);</span><br><span class="line">            pageSize = (<span class="keyword">int</span>)params.get(<span class="string">"pageSize"</span>);</span><br><span class="line">            <span class="comment">/* 获取到执行的SQL，然后拼接上这部分的信息 */</span></span><br><span class="line">            String sql = (String) metaObject.getValue(<span class="string">"delegate.boundSql.sql"</span>);</span><br><span class="line">            sql += <span class="string">" limit "</span>+(pageNum-<span class="number">1</span>)*pageSize +<span class="string">","</span>+pageSize;</span><br><span class="line">            metaObject.setValue(<span class="string">"delegate.boundSql.sql"</span>, sql);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 拦截执行完毕，将语句重新交回MyBatis继续执行 */</span></span><br><span class="line">        <span class="keyword">return</span> invocation.proceed();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">plugin</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Plugin.wrap(target, <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProperties</span><span class="params">(Properties properties)</span> </span>&#123;</span><br><span class="line">        String limit = properties.getProperty(<span class="string">"limit"</span>,<span class="string">"10"</span>);</span><br><span class="line">        <span class="keyword">this</span>.pageNum = Integer.parseInt(limit);</span><br><span class="line">        <span class="keyword">this</span>.dbType = properties.getProperty(<span class="string">"dbType"</span>, <span class="string">"mysql"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于暂时未找到适合SpringBoot配置MyBatis的插件最好加入方法，优雅地加入配置不会自动执行一下方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProperties</span><span class="params">(Properties properties)</span></span></span><br></pre></td></tr></table></figure>

<p>让这个拦截器生效只需要再加入就可以了，但是不会自动调用上述我说的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisInterceptorConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">ConfigurationCustomizer <span class="title">mybatisConfigurationCustomizer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConfigurationCustomizer() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(org.apache.ibatis.session.Configuration configuration)</span> </span>&#123;</span><br><span class="line">                configuration.addInterceptor(<span class="keyword">new</span> PageInterceptor());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-采用PageHelper进行分页"><a href="#4-采用PageHelper进行分页" class="headerlink" title="4.采用PageHelper进行分页"></a>4.采用PageHelper进行分页</h2><p>PageHelper是最简单的吧，你看看上述我写的Interceptor，写起来多麻烦呀，我们看上面那个demo就知道了，PageHelper就是帮你封装了这些复杂的过程，你不用去自己写这个拦截器，只需要导入PageHelper然后就可以实现不侵入原有业务代码的情况下进行分页了</p>
<p>首先需要引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>首先针对PageHelper又有一个新的概念来了，就是逻辑分页与物理分页，其实也不是PageHelper有的，MyBatis自己也有这两个概念。</p>
<p><font color=" #FF8C00">逻辑分页</font>：逻辑分页就是一次性查询很多数据，然后再在结果中检索分页的数据。这样做弊端是需要消耗大量的内存、有内存溢出的风险、对数据库压力较大。</p>
<p><font color=" #FF8C00">物理分页</font>：物理分页就是从数据库查询指定条数的数据，弥补了一次性全部查出的所有数据的种种缺点，比如需要大量的内存，对数据库查询压力较大等问题，我们先前一直使用的就是物理分页</p>
<p>为什么会有逻辑分页的存在，肯定有人跟我一样是个好奇的家伙</p>
<p>其实对于数据库来说，LIMIT并不是一个<font color=" #FF8C00">标准的SQL</font>，如果说我们换数据库了，有些数据库并没有LIMIT操作，也就是大家同样是SQL，但是对于其他的数据库有可能是不存在LIMIT的，所以我们就需要逻辑分页了。</p>
<p>MyBatis的<font color=" #FF8C00">RowBounds</font>，RowBounds是<font color=" #FF8C00">逻辑分页</font>，但是RowBounds只是表面看起来像是在查询所有的数据，然后再检索出来我们需要的，但是实际上内部并不是一次性查询所有的数据，因为MyBatis是对于JDBC的封装，在JDBC驱动当中有一个Fetch Size，这个Fetch Size规定了每次最多从数据库查询多少条数据，然后每次在执行next()操作的时候，才会去数据库当中拿更多的数据。</p>
<center>RowBounds有两个重要的属性，就是offset跟limit</center>

<p><font color=" #FF8C00">offset</font>：代表的是查询的其实行</p>
<p><font color=" #FF8C00">limit</font>：代表的是当前页显示多少条数据</p>
<p>我们就简单演示一个RowBounds的使用，因为LIMIT那种操作其实就跟上面一样的</p>
<p>我们把Service改成这个样子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Pager&lt;Summary&gt; <span class="title">summaryPage</span><span class="params">(<span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize, <span class="keyword">int</span> categoryId)</span> </span>&#123;</span><br><span class="line">    Map&lt;String,Object&gt; params = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    params.put(<span class="string">"categoryId"</span>,categoryId);</span><br><span class="line">    Pager&lt;Summary&gt; page = <span class="keyword">new</span> Pager&lt;&gt;();</span><br><span class="line">    <span class="keyword">long</span> count = summaryMapper.count();</span><br><span class="line">    List&lt;Summary&gt; list = summaryMapper.summaryPage(params,<span class="keyword">new</span> RowBounds(pageNum,pageSize));</span><br><span class="line">    page.setRows(list);</span><br><span class="line">    page.setTotal(count);</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后Mapper改成这样</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SummaryMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Summary&gt; <span class="title">summaryPage</span><span class="params">(Map&lt;String, Object&gt; params, RowBounds rowBounds)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="title">count</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后是XML</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.waibizi.blog.project.mapper.SummaryMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"summaryPage"</span> <span class="attr">resultType</span>=<span class="string">"com.waibizi.blog.project.model.pojo.Summary"</span> <span class="attr">parameterType</span>=<span class="string">"java.util.Map"</span>&gt;</span></span><br><span class="line">       SELECT * FROM summary  WHERE category_id = #&#123;categoryId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"count"</span> <span class="attr">resultType</span>=<span class="string">"long"</span>&gt;</span></span><br><span class="line">        SELECT COUNT(1) FROM summary</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>yaml配置</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pagehelper:</span></span><br><span class="line">  <span class="comment"># 默认值为 false，该参数对使用RowBounds作为分页参数时有效。</span></span><br><span class="line">  <span class="attr">offset-as-page-num:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># pagehelper的纠错机制，这时如果pageNum &lt;= 0会查询第一页，如果pageNum &gt; pages 会查询最后一页。</span></span><br><span class="line">  <span class="attr">reasonable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="彩蛋时间：涉及面试以及答案"><a href="#彩蛋时间：涉及面试以及答案" class="headerlink" title="彩蛋时间：涉及面试以及答案"></a>彩蛋时间：涉及面试以及答案</h2><h3 id="MyBatis-逻辑分页和物理分页的区别是什么？"><a href="#MyBatis-逻辑分页和物理分页的区别是什么？" class="headerlink" title="MyBatis 逻辑分页和物理分页的区别是什么？"></a><strong>MyBatis 逻辑分页和物理分页的区别是什么？</strong></h3><ul>
<li>逻辑分页是一次性查询很多数据，然后再在结果中检索分页的数据。这样做弊端是需要消耗大量的内存、有内存溢出的风险、对数据库压力较大。</li>
<li>物理分页是从数据库查询指定条数的数据，弥补了一次性全部查出的所有数据的种种缺点，比如需要大量的内存，对数据库查询压力较大等问题。</li>
</ul>
<h3 id="RowBounds-是一次性查询全部结果吗？为什么？"><a href="#RowBounds-是一次性查询全部结果吗？为什么？" class="headerlink" title="RowBounds 是一次性查询全部结果吗？为什么？"></a><strong>RowBounds 是一次性查询全部结果吗？为什么？</strong></h3><ul>
<li>RowBounds 表面是在“所有”数据中检索数据，其实并非是一次性查询出所有数据，因为 MyBatis 是对 jdbc 的封装，在 jdbc 驱动中有一个 Fetch Size 的配置，它规定了每次最多从数据库查询多少条数据，假如你要查询更多数据，它会在你执行 next()的时候，去查询更多的数据。就好比你去自动取款机取 10000 元，但取款机每次最多能取 2500 元，所以你要取 4 次才能把钱取完。只是对于 jdbc 来说，当你调用 next()的时候会自动帮你完成查询工作。这样做的好处可以有效的防止内存溢出。</li>
</ul>
<h3 id="MyBatis-有几种分页方式？"><a href="#MyBatis-有几种分页方式？" class="headerlink" title="MyBatis 有几种分页方式？"></a><strong>MyBatis 有几种分页方式？</strong></h3><p>分页方式：逻辑分页和物理分页。</p>
<p><strong>逻辑分页：</strong> 使用 MyBatis 自带的 RowBounds 进行分页，它是一次性查询很多数据，然后在数据中再进行检索。</p>
<p><strong>物理分页：</strong> 自己手写 SQL 分页或使用分页插件 PageHelper，去数据库查询指定条数的分页数据的形式。</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/16/JDBC%E7%AC%94%E8%AF%95%E9%80%89%E6%8B%A9%E9%A2%98/" rel="prev" title="JDBC笔试选择题">
      <i class="fa fa-chevron-left"></i> JDBC笔试选择题
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/16/RequestContextHolder%E6%8C%81%E6%9C%89%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84Request%E5%AE%B9%E5%99%A8%E8%AF%A6%E8%A7%A3/" rel="next" title="RequestContextHolder持有上下文的Request容器详解">
      RequestContextHolder持有上下文的Request容器详解 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MyBatis分页"><span class="nav-number">1.</span> <span class="nav-text">MyBatis分页</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-分页介绍"><span class="nav-number">1.2.</span> <span class="nav-text">1.分页介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-LIMIT分页"><span class="nav-number">1.3.</span> <span class="nav-text">2.LIMIT分页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Interceptor实现分页查询"><span class="nav-number">1.4.</span> <span class="nav-text">3.Interceptor实现分页查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-Interceptor介绍"><span class="nav-number">1.4.1.</span> <span class="nav-text">3.1  Interceptor介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-1-MyBatis四大对象介绍"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">3.1.1 MyBatis四大对象介绍</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-Interceptor实现数据操作分页"><span class="nav-number">1.4.2.</span> <span class="nav-text">3.2 Interceptor实现数据操作分页</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-采用PageHelper进行分页"><span class="nav-number">1.5.</span> <span class="nav-text">4.采用PageHelper进行分页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#彩蛋时间：涉及面试以及答案"><span class="nav-number">1.6.</span> <span class="nav-text">彩蛋时间：涉及面试以及答案</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis-逻辑分页和物理分页的区别是什么？"><span class="nav-number">1.6.1.</span> <span class="nav-text">MyBatis 逻辑分页和物理分页的区别是什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RowBounds-是一次性查询全部结果吗？为什么？"><span class="nav-number">1.6.2.</span> <span class="nav-text">RowBounds 是一次性查询全部结果吗？为什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis-有几种分页方式？"><span class="nav-number">1.6.3.</span> <span class="nav-text">MyBatis 有几种分页方式？</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">歪鼻子</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">140</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">歪鼻子</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
